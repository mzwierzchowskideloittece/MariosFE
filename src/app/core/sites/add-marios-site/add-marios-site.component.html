<div class="container">

  <div class="content">

    <button class="back-button-component" mat-raised-button [routerLink]="'/'">
      <div class="back-button-content">
        <mat-icon class="back-icon">navigate_before</mat-icon>
        <p class="back-button-text">BACK</p>
      </div>
    </button>

    <div class="form-container" >

        <form class="form" [formGroup]="formData" (ngSubmit)="onClickSubmit(formData.value)">
          <div class="receivers">

            <mat-icon class="person-icon">person</mat-icon>

            <mat-form-field class="chip-list">
              <mat-label>Receivers</mat-label>
              <mat-chip-grid #chipGrid aria-label="Selected receivers" formControlName="receivers">
                <mat-chip-row *ngFor="let person of selectedPeople" (removed)="remove(person)">
                  {{person.userName}}
                  <button matChipRemove [attr.aria-label]="'remove ' + person">
                    <mat-icon>cancel</mat-icon>
                  </button>
                </mat-chip-row>
              </mat-chip-grid>
              <input placeholder="Who do you want to recognize?" #personInput [formControl]="personCtrl"
                     [matChipInputFor]="chipGrid" [matAutocomplete]="auto"
                     [matChipInputSeparatorKeyCodes]="separatorKeysCodes"/>
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                <mat-option *ngFor="let person of filteredPeople | async" [value]="person">
                  {{person.userName}}
                </mat-option>
              </mat-autocomplete>
              <mat-error>Receivers are required</mat-error>
            </mat-form-field>
          </div>

          <span class="yellow-line"></span>


          <p>Select category:</p>
          <mat-chip-listbox aria-label="Marios type selection" class="marios-type-chips" formControlName="type">
            <mat-chip-option *ngFor="let mariosType of mariosTypes" (click)="selectedMariosType = mariosType.externalId">
              <mat-icon class="marios-type-icon">star</mat-icon>
              {{mariosType.type}}
            </mat-chip-option>
          </mat-chip-listbox>
          <mat-error *ngIf="selectedMariosType != '' && !formData.value.type">Category is required</mat-error>

          <span class="yellow-line"></span>

          <p>Title:</p>

          <mat-form-field class="title-form-field" appearance="outline">

            <input matInput placeholder="Enter marios title" formControlName="title">
            <mat-error>Title is required</mat-error>
          </mat-form-field>

          <span class="yellow-line"></span>

          <p>Comment:</p>

          <mat-form-field class="comment-form-field" appearance="outline">
            <textarea matInput #input maxlength="255" formControlName="comment"></textarea>
            <mat-hint align="end">{{input.value.length}}/255</mat-hint>
            <mat-error>Comment is required</mat-error>
          </mat-form-field>

          <div class="send-button-container">
            <p *ngIf="errorSendingMarios" class="cant-send-message">Can't send the Marios</p>
            <span class="space-between-error-and-send-button"></span>
            <button type="submit" [disabled]="disableSendButton" mat-raised-button class="send-button-component">
              <p class="send-button-text">SEND</p>
            </button>
          </div>

        </form>

    </div>

  </div>

</div>
